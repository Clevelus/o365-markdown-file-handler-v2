@model MarkdownFileHandler.Models.AsyncActionModel

<div><b>Current State:</b>&nbsp;@Model.Status.State</div>
<div><b>Job ID:</b>&nbsp;@Model.JobIdentifier</div>

@if (Model.Status.State == FileHandlerActions.JobState.Error || 
     Model.Status.State == FileHandlerActions.JobState.Complete)
{
    <script type="text/javascript">
      clearTimeout(refreshTimerId);
      $("#divLoadingSpinner").hide();
    </script>
}
else
{
    <script type="text/javascript">
      refreshTimerId = setTimeout(refreshStatus, 100);
      $("#divLoadingSpinner").show();
    </script>
}

@if (Model.Status.ResultWebUrl != null)
{
    <div><a href="@Model.Status.ResultWebUrl">View the converted file</a></div>
}
@if (Model.Status.Error != null)
{
    <div>An error occured converting the file to PDF: @Model.Status.Error.Message</div>
    <h3>Activation parameters</h3>
    foreach(var item in Model.Status.OriginalParameters)
    {
        <div><strong>@item.Key</strong>: @item.Value</div>
    }
}